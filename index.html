<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>AI Capability Atlas â€” Learning Games</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #1a1a2e; color: white; }
    .game-card { transition: all 0.3s ease; }
    .game-card:hover { transform: translateY(-4px); }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .spinning { animation: spin 2s linear infinite; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script>
    const { createElement: h, useState, useEffect, useRef } = React;

    const capabilities = [
      { id: 'explain', name: 'Explain Complex Concepts', category: 'Learn', desc: 'Break down topics', level: 'Novice', icon: 'ðŸ“š' },
      { id: 'summarize', name: 'Summarize Texts', category: 'Research', desc: 'Condense content', level: 'Novice', icon: 'ðŸ“' },
      { id: 'brainstorm', name: 'Brainstorm Ideas', category: 'Create', desc: 'Generate concepts', level: 'Novice', icon: 'ðŸ’¡' },
      { id: 'compare', name: 'Compare Options', category: 'Decide', desc: 'Evaluate choices', level: 'Competent', icon: 'âš–ï¸' },
      { id: 'clarity', name: 'Improve Clarity', category: 'Improve', desc: 'Make text clear', level: 'Novice', icon: 'âœ¨' },
      { id: 'analyze', name: 'Analyze Arguments', category: 'Research', desc: 'Evaluate logic', level: 'Competent', icon: 'ðŸ”' },
      { id: 'stories', name: 'Generate Stories', category: 'Create', desc: 'Create narratives', level: 'Competent', icon: 'ðŸ“–' },
      { id: 'solve', name: 'Solve Problems', category: 'Solve', desc: 'Find solutions', level: 'Proficient', icon: 'ðŸ§©' }
    ];

    function Navigation({ currentGame, setGame }) {
      const games = [
        { id: 'home', label: 'ðŸ  Home' },
        { id: 'labyrinth', label: 'ðŸªž Labyrinth' },
        { id: 'codex', label: 'ðŸ“– Codex' },
        { id: 'progressorium', label: 'âš™ï¸ Progress' },
        { id: 'wheel', label: 'ðŸŽ° Wheel' }
      ];
      return h('nav', { className: 'bg-gray-900/90 border-b border-white/10 sticky top-0 z-50' },
        h('div', { className: 'max-w-7xl mx-auto px-4' },
          h('div', { className: 'flex items-center justify-between h-16 overflow-x-auto' },
            h('div', { className: 'flex space-x-1' },
              games.map(g => h('button', {
                key: g.id,
                onClick: () => setGame(g.id),
                className: `px-3 py-2 text-sm rounded-lg whitespace-nowrap transition-colors ${
                  currentGame === g.id ? 'bg-pink-600 text-white' : 'text-gray-300 hover:text-pink-400'
                }`
              }, g.label))
            )
          )
        )
      );
    }

    function Hero({ setGame }) {
      const games = [
        { id: 'labyrinth', title: 'ðŸªž Labyrinth', desc: 'Navigate the decision tree', color: 'pink' },
        { id: 'codex', title: 'ðŸ“– Celestial Codex', desc: 'Draw constellations', color: 'blue' },
        { id: 'progressorium', title: 'âš™ï¸ Progressorium', desc: 'Grow your skills', color: 'amber' },
        { id: 'wheel', title: 'ðŸŽ° Wheel of Misfortune', desc: 'Fate decides', color: 'green' }
      ];
      const colors = { pink: 'from-pink-600/20 to-pink-800/20 border-pink-500/30', blue: 'from-blue-600/20 to-blue-800/20 border-blue-500/30', amber: 'from-amber-600/20 to-amber-800/20 border-amber-500/30', green: 'from-green-600/20 to-green-800/20 border-green-500/30' };
      
      return h('div', { className: 'min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 p-8' },
        h('div', { className: 'text-center max-w-4xl mx-auto pt-12' },
          h('h1', { className: 'text-5xl md:text-7xl font-bold mb-4' },
            h('span', { className: 'text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400' }, 'AI Capability Atlas')
          ),
          h('p', { className: 'text-xl text-gray-300 mb-12' }, 'Discover AI capabilities through play'),
          h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-6' },
            games.map(g => h('div', {
              key: g.id,
              onClick: () => setGame(g.id),
              className: `game-card cursor-pointer bg-gradient-to-br ${colors[g.color]} border rounded-2xl p-8`
            },
              h('h3', { className: 'text-2xl font-bold text-white mb-2' }, g.title),
              h('p', { className: 'text-gray-400 mb-4' }, g.desc),
              h('span', { className: 'text-pink-400 font-medium' }, 'Play Now â†’')
            ))
          )
        )
      );
    }

    function Labyrinth() {
      const svgRef = useRef(null);
      const [selected, setSelected] = useState(null);

      useEffect(() => {
        if (!svgRef.current) return;
        const svg = d3.select(svgRef.current);
        svg.selectAll('*').remove();
        
        const treeData = {
          name: 'AI Capabilities',
          children: [
            { name: 'Learn', children: capabilities.filter(c => c.category === 'Learn').map(c => ({ name: c.name, cap: c })) },
            { name: 'Research', children: capabilities.filter(c => c.category === 'Research').map(c => ({ name: c.name, cap: c })) },
            { name: 'Create', children: capabilities.filter(c => c.category === 'Create').map(c => ({ name: c.name, cap: c })) },
            { name: 'Decide', children: capabilities.filter(c => c.category === 'Decide').map(c => ({ name: c.name, cap: c })) }
          ]
        };

        const root = d3.hierarchy(treeData);
        d3.tree().size([300, 500])(root);

        svg.selectAll('.link').data(root.links()).enter().append('path')
          .attr('fill', 'none').attr('stroke', '#ec4899').attr('stroke-width', 2)
          .attr('d', d3.linkHorizontal().x(d => d.y).y(d => d.x));

        const nodes = svg.selectAll('.node').data(root.descendants()).enter().append('g')
          .attr('transform', d => `translate(${d.y},${d.x})`)
          .style('cursor', 'pointer')
          .on('click', (e, d) => { if (d.data.cap) setSelected(d.data.cap); });

        nodes.append('circle').attr('r', d => d.data.cap ? 20 : 15).attr('fill', '#7c3aed').attr('stroke', '#ec4899').attr('stroke-width', 2);
        nodes.append('text').attr('dy', '.35em').attr('x', d => d.children ? -25 : 25).attr('text-anchor', d => d.children ? 'end' : 'start')
          .text(d => d.data.name).attr('fill', 'white').attr('font-size', '11px');
      }, []);

      return h('div', { className: 'min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 p-4 md:p-8' },
        h('h1', { className: 'text-3xl font-bold text-center mb-4 text-pink-400' }, 'ðŸªž Labyrinth of Mirrors'),
        h('p', { className: 'text-center text-gray-400 mb-8' }, 'Click nodes to discover capabilities'),
        h('div', { className: 'grid grid-cols-1 lg:grid-cols-3 gap-6 max-w-6xl mx-auto' },
          h('div', { className: 'lg:col-span-2 bg-gray-800/50 rounded-2xl p-4 overflow-x-auto' },
            h('svg', { ref: svgRef, width: 700, height: 400, className: 'w-full' })
          ),
          h('div', { className: 'bg-gray-800/50 rounded-2xl p-6' },
            selected ? h('div', { className: 'text-center' },
              h('div', { className: 'text-5xl mb-4' }, selected.icon),
              h('h2', { className: 'text-xl font-bold text-pink-400 mb-2' }, selected.name),
              h('span', { className: 'px-3 py-1 bg-purple-600/30 rounded-full text-sm' }, selected.category),
              h('p', { className: 'text-gray-300 mt-4' }, selected.desc)
            ) : h('div', { className: 'text-center text-gray-500 py-12' }, 'Click a mirror node')
          )
        )
      );
    }

    function CelestialCodex() {
      const canvasRef = useRef(null);
      const [stars, setStars] = useState([]);
      const [lines, setLines] = useState([]);
      const [selected, setSelected] = useState(null);

      useEffect(() => {
        const newStars = capabilities.slice(0, 6).map((cap, i) => ({
          id: i, x: 100 + (i % 3) * 200, y: 100 + Math.floor(i / 3) * 150, cap
        }));
        setStars(newStars);
      }, []);

      useEffect(() => {
        const canvas = canvasRef.current;
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        
        ctx.fillStyle = '#0f172a';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        lines.forEach(([s1, s2]) => {
          ctx.strokeStyle = '#ec4899';
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.moveTo(s1.x, s1.y);
          ctx.lineTo(s2.x, s2.y);
          ctx.stroke();
        });

        stars.forEach((star, i) => {
          const isSelected = selected === star;
          ctx.fillStyle = isSelected ? '#ec4899' : '#7c3aed';
          ctx.beginPath();
          ctx.arc(star.x, star.y, isSelected ? 20 : 15, 0, Math.PI * 2);
          ctx.fill();
          ctx.font = '20px Arial';
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          ctx.fillText(star.cap.icon, star.x, star.y);
        });
      }, [stars, lines, selected]);

      const handleClick = (e) => {
        const canvas = canvasRef.current;
        const rect = canvas.getBoundingClientRect();
        const x = (e.clientX - rect.left) * (canvas.width / rect.width);
        const y = (e.clientY - rect.top) * (canvas.height / rect.height);
        
        const clicked = stars.find(s => Math.sqrt((s.x - x) ** 2 + (s.y - y) ** 2) < 25);
        if (clicked) {
          if (selected && selected.id !== clicked.id) {
            setLines([...lines, [selected, clicked]]);
          }
          setSelected(clicked);
        }
      };

      return h('div', { className: 'min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 p-4 md:p-8' },
        h('h1', { className: 'text-3xl font-bold text-center mb-4 text-blue-400' }, 'ðŸ“– Celestial Codex'),
        h('p', { className: 'text-center text-gray-400 mb-4' }, 'Click stars to connect them'),
        selected && h('div', { className: 'text-center mb-4' },
          h('span', { className: 'text-2xl mr-2' }, selected.cap.icon),
          h('span', { className: 'text-xl text-blue-300' }, selected.cap.name)
        ),
        h('canvas', { 
          ref: canvasRef, 
          width: 650, 
          height: 350, 
          className: 'w-full max-w-3xl mx-auto bg-gray-800/50 rounded-2xl border border-white/10 cursor-pointer',
          onClick: handleClick
        })
      );
    }

    function Progressorium() {
      const [active, setActive] = useState([]);
      const skills = capabilities.slice(0, 4);

      return h('div', { className: 'min-h-screen bg-gradient-to-br from-amber-900 via-orange-900 to-amber-950 p-4 md:p-8' },
        h('h1', { className: 'text-3xl font-bold text-center mb-8 text-amber-300' }, 'âš™ï¸ Progressorium'),
        h('div', { className: 'max-w-2xl mx-auto space-y-4' },
          skills.map((cap, i) => h('div', {
            key: cap.id,
            onClick: () => setActive(a => a.includes(i) ? a : [...a, i]),
            className: `p-6 rounded-xl border cursor-pointer transition-all ${
              active.includes(i) 
                ? 'bg-amber-600/30 border-amber-400' 
                : 'bg-black/30 border-amber-600/30 hover:border-amber-500/50'
            }`
          },
            h('div', { className: 'flex items-center gap-4' },
              h('span', { className: 'text-3xl' }, cap.icon),
              h('div', null,
                h('h3', { className: 'text-lg font-bold text-amber-200' }, cap.name),
                h('p', { className: 'text-amber-200/60 text-sm' }, cap.desc),
                active.includes(i) && h('span', { className: 'text-green-400 text-sm' }, 'âœ“ Activated')
              )
            )
          ))
        ),
        h('div', { className: 'mt-8 text-center' },
          h('div', { className: 'text-amber-300' }, `Progress: ${active.length} / ${skills.length}`),
          h('div', { className: 'w-64 h-2 bg-black/40 rounded-full mx-auto mt-2' },
            h('div', { 
              className: 'h-full bg-gradient-to-r from-amber-500 to-yellow-400 rounded-full transition-all',
              style: { width: `${(active.length / skills.length) * 100}%` }
            })
          )
        )
      );
    }

    function WheelOfMisfortune() {
      const [spinning, setSpinning] = useState(false);
      const [result, setResult] = useState(null);
      const [rotation, setRotation] = useState(0);

      const spin = () => {
        if (spinning) return;
        setSpinning(true);
        setResult(null);
        const newRotation = rotation + 1800 + Math.random() * 360;
        setRotation(newRotation);
        setTimeout(() => {
          setSpinning(false);
          setResult(capabilities[Math.floor(Math.random() * capabilities.length)]);
        }, 2000);
      };

      return h('div', { className: 'min-h-screen bg-black p-4 md:p-8 font-mono' },
        h('h1', { className: 'text-3xl md:text-5xl font-bold text-center mb-8 text-green-500' }, 'ðŸŽ° WHEEL OF MISFORTUNE'),
        h('div', { className: 'text-center mb-8' },
          h('div', { 
            className: `w-48 h-48 mx-auto rounded-full border-4 border-green-500 flex items-center justify-center text-6xl mb-4 ${spinning ? 'spinning' : ''}`,
            style: { transform: `rotate(${rotation}deg)` }
          }, 'ðŸŽ¯')
        ),
        h('button', { 
          onClick: spin,
          disabled: spinning,
          className: 'px-8 py-4 bg-green-600 disabled:bg-green-800 text-black font-bold text-xl rounded-lg border-2 border-green-400 block mx-auto'
        }, spinning ? 'SPINNING...' : 'SPIN THE WHEEL'),
        result && h('div', { className: 'mt-8 max-w-md mx-auto bg-green-900/30 border-2 border-green-500 rounded-xl p-6 text-center' },
          h('div', { className: 'text-5xl mb-4' }, result.icon),
          h('h2', { className: 'text-2xl font-bold text-green-300' }, result.name),
          h('p', { className: 'text-green-200/70 mt-2' }, result.desc)
        )
      );
    }

    function App() {
      const [game, setGame] = useState('home');

      return h('div', null,
        h(Navigation, { currentGame: game, setGame }),
        game === 'home' && h(Hero, { setGame }),
        game === 'labyrinth' && h(Labyrinth),
        game === 'codex' && h(CelestialCodex),
        game === 'progressorium' && h(Progressorium),
        game === 'wheel' && h(WheelOfMisfortune)
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(h(App));
  </script>
</body>
</html>
