<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>AI Capability Atlas â€” Learning Games</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-router-dom@6/umd/react-router-dom.production.min.js" crossorigin></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#e94560',
            secondary: '#533483',
            dark: '#1a1a2e',
            accent: '#0f3460',
          }
        }
      }
    }
  </script>
  <style>
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #1a1a2e; color: white; }
    .star-glow { animation: glow 2s ease-in-out infinite alternate; }
    @keyframes glow { from { filter: drop-shadow(0 0 5px #e94560); } to { filter: drop-shadow(0 0 20px #e94560); } }
    .gear-spin { animation: spin 10s linear infinite; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <div id="root"></div>
  <script>
    const { createElement: h, useState, useEffect, useRef } = React;
    const { BrowserRouter, Routes, Route, Link } = ReactRouterDOM;

    const capabilities = [
      { id: 'explain', name: 'Explain Complex Concepts', category: 'Learn', desc: 'Break down topics', level: 'Novice', icon: 'ðŸ“š' },
      { id: 'summarize', name: 'Summarize Texts', category: 'Research', desc: 'Condense content', level: 'Novice', icon: 'ðŸ“' },
      { id: 'brainstorm', name: 'Brainstorm Ideas', category: 'Create', desc: 'Generate concepts', level: 'Novice', icon: 'ðŸ’¡' },
      { id: 'compare', name: 'Compare Options', category: 'Decide', desc: 'Evaluate choices', level: 'Competent', icon: 'âš–ï¸' },
      { id: 'clarity', name: 'Improve Clarity', category: 'Improve', desc: 'Make text clear', level: 'Novice', icon: 'âœ¨' },
      { id: 'analyze', name: 'Analyze Arguments', category: 'Research', desc: 'Evaluate logic', level: 'Competent', icon: 'ðŸ”' },
      { id: 'stories', name: 'Generate Stories', category: 'Create', desc: 'Create narratives', level: 'Competent', icon: 'ðŸ“–' },
      { id: 'solve', name: 'Solve Problems', category: 'Solve', desc: 'Find solutions', level: 'Proficient', icon: 'ðŸ§©' }
    ];

    function Navigation() {
      return h('nav', { className: 'bg-dark/90 border-b border-white/10 sticky top-0 z-50' },
        h('div', { className: 'max-w-7xl mx-auto px-4' },
          h('div', { className: 'flex items-center justify-between h-16' },
            h(Link, { to: '/', className: 'text-xl font-bold text-primary' }, 'AI Capability Games'),
            h('div', { className: 'hidden md:flex space-x-4' },
              h(Link, { to: '/labyrinth', className: 'text-gray-300 hover:text-primary px-3 py-2 text-sm' }, 'ðŸªž Labyrinth'),
              h(Link, { to: '/codex', className: 'text-gray-300 hover:text-primary px-3 py-2 text-sm' }, 'ðŸ“– Codex'),
              h(Link, { to: '/progressorium', className: 'text-gray-300 hover:text-primary px-3 py-2 text-sm' }, 'âš™ï¸ Progress'),
              h(Link, { to: '/wheel', className: 'text-gray-300 hover:text-primary px-3 py-2 text-sm' }, 'ðŸŽ° Wheel')
            )
          )
        )
      );
    }

    function Hero() {
      return h('div', { className: 'min-h-screen bg-gradient-to-br from-dark via-secondary to-accent p-8' },
        h('div', { className: 'text-center max-w-4xl mx-auto pt-24' },
          h('h1', { className: 'text-5xl md:text-7xl font-bold mb-6' },
            h('span', { className: 'text-primary' }, 'AI Capability Atlas'),
            h('br', null),
            h('span', { className: 'text-white' }, 'Learning Games')
          ),
          h('p', { className: 'text-xl text-gray-300 mb-12' }, 'Discover AI capabilities through play'),
          h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-6' },
            h(GameCard, { title: 'ðŸªž Labyrinth', desc: 'Navigate the decision tree', to: '/labyrinth', color: 'pink' }),
            h(GameCard, { title: 'ðŸ“– Celestial Codex', desc: 'Draw constellations', to: '/codex', color: 'blue' }),
            h(GameCard, { title: 'âš™ï¸ Progressorium', desc: 'Grow your skills', to: '/progressorium', color: 'amber' }),
            h(GameCard, { title: 'ðŸŽ° Wheel of Misfortune', desc: 'Fate decides', to: '/wheel', color: 'green' })
          )
        )
      );
    }

    function GameCard({ title, desc, to, color }) {
      const colors = { pink: 'from-pink-500 to-purple-600', blue: 'from-blue-500 to-cyan-600', amber: 'from-amber-500 to-orange-600', green: 'from-green-500 to-emerald-600' };
      return h(Link, { to, className: 'block group' },
        h('div', { className: `bg-gradient-to-br ${colors[color]} opacity-20 group-hover:opacity-40 rounded-2xl p-8 transition-all hover:scale-105` },
          h('div', { className: 'bg-dark/50 rounded-xl p-6 border border-white/10' },
            h('h3', { className: 'text-2xl font-bold text-white mb-2' }, title),
            h('p', { className: 'text-gray-400' }, desc),
            h('div', { className: 'mt-4 text-primary' }, 'Play Now â†’')
          )
        )
      );
    }

    function Labyrinth() {
      const svgRef = useRef(null);
      const [selected, setSelected] = useState(null);

      useEffect(() => {
        if (!svgRef.current) return;
        const svg = d3.select(svgRef.current);
        svg.selectAll('*').remove();
        
        const treeData = {
          name: 'AI Capabilities',
          children: [
            { name: 'Learn', children: capabilities.filter(c => c.category === 'Learn').map(c => ({ name: c.name, cap: c })) },
            { name: 'Research', children: capabilities.filter(c => c.category === 'Research').map(c => ({ name: c.name, cap: c })) },
            { name: 'Create', children: capabilities.filter(c => c.category === 'Create').map(c => ({ name: c.name, cap: c })) },
            { name: 'Decide', children: capabilities.filter(c => c.category === 'Decide').map(c => ({ name: c.name, cap: c })) }
          ]
        };

        const root = d3.hierarchy(treeData);
        d3.tree().size([300, 500])(root);

        svg.selectAll('.link').data(root.links()).enter().append('path')
          .attr('fill', 'none').attr('stroke', '#e94560').attr('stroke-width', 2)
          .attr('d', d3.linkHorizontal().x(d => d.y).y(d => d.x));

        const nodes = svg.selectAll('.node').data(root.descendants()).enter().append('g')
          .attr('transform', d => `translate(${d.y},${d.x})`)
          .style('cursor', 'pointer')
          .on('click', (e, d) => { if (d.data.cap) setSelected(d.data.cap); });

        nodes.append('circle').attr('r', d => d.data.cap ? 20 : 15).attr('fill', '#533483').attr('stroke', '#e94560').attr('stroke-width', 2);
        nodes.append('text').attr('dy', '.35em').attr('x', d => d.children ? -25 : 25).attr('text-anchor', d => d.children ? 'end' : 'start')
          .text(d => d.data.name).attr('fill', 'white').attr('font-size', '12px');
      }, []);

      return h('div', { className: 'min-h-screen bg-gradient-to-br from-dark via-secondary to-accent p-8' },
        h('div', { className: 'max-w-7xl mx-auto' },
          h('h1', { className: 'text-4xl font-bold text-center mb-8' }, 'ðŸªž Labyrinth'),
          h('div', { className: 'grid grid-cols-1 lg:grid-cols-3 gap-8' },
            h('div', { className: 'lg:col-span-2 bg-dark/50 rounded-2xl p-6' },
              h('svg', { ref: svgRef, width: 700, height: 400, className: 'w-full' })
            ),
            h('div', { className: 'bg-dark/50 rounded-2xl p-6' },
              selected ? h('div', null,
                h('div', { className: 'text-4xl text-center mb-4' }, selected.icon),
                h('h2', { className: 'text-2xl font-bold text-primary mb-2' }, selected.name),
                h('p', { className: 'text-gray-300' }, selected.desc)
              ) : h('div', { className: 'text-center text-gray-400 py-12' }, 'Click a node')
            )
          )
        )
      );
    }

    function CelestialCodex() {
      const canvasRef = useRef(null);
      const [connections, setConnections] = useState([]);
      const [selectedCap, setSelectedCap] = useState(null);

      useEffect(() => {
        const canvas = canvasRef.current;
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        let frameId;

        const stars = capabilities.slice(0, 8).map((cap, i) => ({
          x: 100 + (i % 4) * 150,
          y: 100 + Math.floor(i / 4) * 150,
          cap
        }));

        const animate = () => {
          ctx.fillStyle = '#0f172a';
          ctx.fillRect(0, 0, canvas.width, canvas.height);

          connections.forEach(([start, end]) => {
            ctx.strokeStyle = '#e94560';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(start.x, start.y);
            ctx.lineTo(end.x, end.y);
            ctx.stroke();
          });

          stars.forEach(star => {
            ctx.fillStyle = '#533483';
            ctx.beginPath();
            ctx.arc(star.x, star.y, 15, 0, Math.PI * 2);
            ctx.fill();
            ctx.font = '20px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(star.cap.icon, star.x, star.y);
          });

          frameId = requestAnimationFrame(animate);
        };

        animate();
        return () => cancelAnimationFrame(frameId);
      }, [connections]);

      return h('div', { className: 'min-h-screen bg-gradient-to-br from-dark via-secondary to-accent p-8' },
        h('div', { className: 'max-w-4xl mx-auto' },
          h('h1', { className: 'text-4xl font-bold text-center mb-8' }, 'ðŸ“– Celestial Codex'),
          h('canvas', { ref: canvasRef, width: 700, height: 400, className: 'w-full bg-dark/80 rounded-2xl border border-white/10' })
        )
      );
    }

    function Progressorium() {
      return h('div', { className: 'min-h-screen bg-gradient-to-br from-amber-900 via-orange-900 to-amber-950 p-8' },
        h('div', { className: 'max-w-4xl mx-auto text-center' },
          h('h1', { className: 'text-4xl font-bold text-amber-100 mb-8' }, 'âš™ï¸ Progressorium'),
          h('div', { className: 'bg-black/40 rounded-2xl p-8 border border-amber-500/30' },
            capabilities.slice(0, 4).map(cap => 
              h('div', { key: cap.id, className: 'flex items-center gap-4 mb-4 p-4 bg-amber-900/30 rounded-lg' },
                h('span', { className: 'text-2xl' }, cap.icon),
                h('div', null,
                  h('h3', { className: 'font-bold text-amber-300' }, cap.name),
                  h('p', { className: 'text-amber-200/70 text-sm' }, cap.desc)
                )
              )
            )
          )
        )
      );
    }

    function WheelOfMisfortune() {
      const [spinning, setSpinning] = useState(false);
      const [result, setResult] = useState(null);

      const spin = () => {
        if (spinning) return;
        setSpinning(true);
        setResult(null);
        setTimeout(() => {
          setSpinning(false);
          setResult(capabilities[Math.floor(Math.random() * capabilities.length)]);
        }, 2000);
      };

      return h('div', { className: 'min-h-screen bg-black p-8 font-mono text-center' },
        h('h1', { className: 'text-4xl md:text-6xl font-bold text-green-500 mb-8' }, 'ðŸŽ° WHEEL OF MISFORTUNE'),
        h('button', { 
          onClick: spin, 
          disabled: spinning,
          className: 'px-8 py-4 bg-green-600 disabled:bg-green-800 text-black font-bold text-xl rounded border-2 border-green-400'
        }, spinning ? 'SPINNING...' : 'SPIN'),
        result && h('div', { className: 'mt-8 bg-green-900/30 border-2 border-green-500 rounded-lg p-6' },
          h('div', { className: 'text-4xl mb-4' }, result.icon),
          h('h3', { className: 'text-2xl font-bold text-green-300' }, result.name),
          h('p', { className: 'text-green-200/70' }, result.desc)
        )
      );
    }

    function App() {
      return h(BrowserRouter, { basename: '/ai-capability-games' },
        h('div', { className: 'min-h-screen bg-dark text-white' },
          h(Navigation),
          h(Routes, null,
            h(Route, { path: '/', element: h(Hero) }),
            h(Route, { path: '/labyrinth', element: h(Labyrinth) }),
            h(Route, { path: '/codex', element: h(CelestialCodex) }),
            h(Route, { path: '/progressorium', element: h(Progressorium) }),
            h(Route, { path: '/wheel', element: h(WheelOfMisfortune) })
          )
        )
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(h(App));
  </script>
</body>
</html>
